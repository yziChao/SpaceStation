{% extends 'core/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}

<title>API</title>

<title>Concurso por $20.000</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">


<div id="menu"></div>
    <br>
    <br>
    <div class="container text-center ">
        <h1>Concurso por premio<p>Comprando productos por sobre $20.000</p></h1>
        <br>
        <div id="products-container" class="row"></div>
    </div>

    <div class="d-flex justify-content-center align-items-center" style="height: 100px;">
        <button onclick="redirectToIndex()" class="btn btn-secondary mb-3">Regresar a Space Station</button>
    </div>

{% endblock content %}

{% block script %}

<script>
  // URL de la API
  const apiUrl = 'http://fakestoreapi.com/products';

  // Realizar una solicitud HTTP GET a la API
  fetch(apiUrl)
      .then(response => response.json()) // Convertir la respuesta a JSON
      .then(data => {
          // Obtener el contenedor de productos
          const productsContainer = document.getElementById('products-container');

          // Mostrar los productos recibidos en la página HTML
          data.forEach(product => {
              // Crear una columna para cada producto
              const productCard = document.createElement('div');
              productCard.classList.add('col-md-4', 'mb-4');

              // Crear una tarjeta de producto
              productCard.innerHTML = `
                  <div class="card">
                      <img src="${product.image}" class="card-img-top" alt="${product.title}">
                      <div class="card-body">
                          <h5 class="card-title">${product.title}</h5>
                          <p class="card-text">${product.description}</p>
                          <p class="card-text"><strong>Precio:</strong> $${product.price}</p>
                      </div>
                  </div>
              `;

              // Agregar la tarjeta de producto al contenedor
              productsContainer.appendChild(productCard);
          });
      })
      .catch(error => {
          console.error('Error al realizar la solicitud a la API:', error);
      });
      
              // Función para redirigir a la página index.html
  function redirectToIndex() {
      window.location.href = 'inicio';
  }

  
</script>
  
{% endblock script %}
